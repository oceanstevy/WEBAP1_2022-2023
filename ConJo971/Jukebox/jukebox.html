<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Jukebox</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
    <script>
      // FUNKTION: datalist füllen
      function fillDatalist(data){
          let SongArtist = "";

        // Array durchgehen und Liste füllen
          data.forEach(function(Object) {
              SongArtist += "<option value='" + Object.artist + "'>";
          });

		// Liste aktualisieren
          $('#artists').html(SongArtist);
      }

      // FUNKTION: Tabelle laden
      fillSongTable();
      function fillSongTable(){
          // Suchstring ermitteln
          let Value = $("#artistsinput").val();
          if (Value === undefined){
              Value = "";
          }

		  // Suchstring an Server schicken mittls der jQuery Funktion $.getJSON()
          $.getJSON("https://localhost/Github/WEBAP1_2022-2023/ConJo971/Jukebox/musicserver.php?Seachartist="+Value , function(SongsArray) {

              // Erhaltenes Array durchgehen und Tabelle füllen
              let SongTable = "";

              SongsArray.forEach(function(Element) {
                  SongTable += "<tr>";
                    SongTable += "<td>";
                        SongTable += Element['artist'];
                    SongTable += "</td>";
                    SongTable += "<td>";
                        SongTable += Element['title'];
                    SongTable += "</td>";
                  SongTable += "</tr>";

              });

              // Tabelle aktualisieren
              $('#songtablebody').html(SongTable);
          });
      }

      // Ausführung nach dem Laden der Seite
      $(function(){
        // Alle Artisten laden und Liste füllen mittels $.getJSON
          $.getJSON("https://localhost/Github/WEBAP1_2022-2023/ConJo971/Jukebox/musicserver.php?artist=all" , fillDatalist);

      // Beim Ändern der Searchbox laden
          $("#artistsinput").keyup(fillSongTable);
      });

    </script>
    <style>
        table, td, th{
            border: 1px solid black;
            border-collapse: collapse;
            margin: 10px;
        }
        th {
            background-color: lightblue;
        }
    </style>
</head>
<body>
<label for="artistsinput">Artist: </label>
<input type="text" id="artistsinput" list="artists">
<datalist id="artists">
</datalist>
<table>
    <thead>
    <tr>
        <th>Artist</th>
        <th>Songs</th>
    </tr>
    <tbody id="songtablebody">
    </tbody>
</table>
</body>
</html>